{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":69,"index":103}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useStore\", {\n    enumerable: true,\n    get: function () {\n      return useStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  const useStore = (0, _zustand.create)((set, get) => ({\n    user: null,\n    cycleData: null,\n    intimacyEntries: [],\n    stats: null,\n    fertilityData: {\n      periods: [],\n      fertile_days: [],\n      ovulation_days: []\n    },\n    isLoading: true,\n    setUser: user => set({\n      user\n    }),\n    setCycleData: cycleData => set({\n      cycleData\n    }),\n    setIntimacyEntries: intimacyEntries => set({\n      intimacyEntries\n    }),\n    setStats: stats => set({\n      stats\n    }),\n    // Salva fertilityData anche in AsyncStorage\n    // NON sovrascrive dati validi con dati vuoti\n    setFertilityData: async newFertilityData => {\n      const currentData = get().fertilityData;\n\n      // Se i nuovi dati sono vuoti ma abbiamo già dati validi, NON sovrascrivere\n      const newDataIsEmpty = !newFertilityData || (!newFertilityData.periods || newFertilityData.periods.length === 0) && (!newFertilityData.fertile_days || newFertilityData.fertile_days.length === 0) && (!newFertilityData.ovulation_days || newFertilityData.ovulation_days.length === 0);\n      const currentDataHasValues = currentData && (currentData.periods && currentData.periods.length > 0 || currentData.fertile_days && currentData.fertile_days.length > 0 || currentData.ovulation_days && currentData.ovulation_days.length > 0);\n\n      // Se nuovi dati vuoti e abbiamo già dati validi -> non fare nulla\n      if (newDataIsEmpty && currentDataHasValues) {\n        console.log('Skipping empty fertility update - keeping existing data');\n        return;\n      }\n\n      // Altrimenti aggiorna\n      set({\n        fertilityData: newFertilityData\n      });\n\n      // Persisti in AsyncStorage\n      try {\n        if (!newDataIsEmpty) {\n          await AsyncStorage.default.setItem('fertilityData', JSON.stringify(newFertilityData));\n        }\n      } catch (e) {\n        console.log('Error saving fertility data');\n      }\n    },\n    setLoading: isLoading => set({\n      isLoading\n    }),\n    loadUser: async () => {\n      try {\n        const userData = await AsyncStorage.default.getItem('user');\n        if (userData) {\n          set({\n            user: JSON.parse(userData),\n            isLoading: false\n          });\n        } else {\n          set({\n            isLoading: false\n          });\n        }\n      } catch (error) {\n        console.error('Error loading user:', error);\n        set({\n          isLoading: false\n        });\n      }\n    },\n    // Carica fertilityData da AsyncStorage\n    loadFertilityData: async () => {\n      try {\n        const data = await AsyncStorage.default.getItem('fertilityData');\n        if (data) {\n          const parsed = JSON.parse(data);\n          set({\n            fertilityData: parsed\n          });\n        }\n      } catch (e) {\n        console.log('Error loading fertility data');\n      }\n    },\n    saveUser: async user => {\n      try {\n        await AsyncStorage.default.setItem('user', JSON.stringify(user));\n        set({\n          user\n        });\n      } catch (error) {\n        console.error('Error saving user:', error);\n      }\n    },\n    logout: async () => {\n      try {\n        await AsyncStorage.default.removeItem('user');\n        await AsyncStorage.default.removeItem('fertilityData');\n        set({\n          user: null,\n          cycleData: null,\n          intimacyEntries: [],\n          stats: null,\n          fertilityData: {\n            periods: [],\n            fertile_days: [],\n            ovulation_days: []\n          }\n        });\n      } catch (error) {\n        console.error('Error logging out:', error);\n      }\n    }\n  }));\n});","lineCount":140,"map":[[12,2,59,0,"Object"],[12,8,59,0],[12,9,59,0,"defineProperty"],[12,23,59,0],[12,24,59,0,"exports"],[12,31,59,0],[13,4,59,0,"enumerable"],[13,14,59,0],[14,4,59,0,"get"],[14,7,59,0],[14,18,59,0,"get"],[14,19,59,0],[15,6,59,0],[15,13,59,0,"useStore"],[15,21,59,0],[16,4,59,0],[17,2,59,0],[18,2,1,0],[18,6,1,0,"_zustand"],[18,14,1,0],[18,17,1,0,"require"],[18,24,1,0],[18,25,1,0,"_dependencyMap"],[18,39,1,0],[19,2,2,0],[19,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,42,2,0],[19,45,2,0,"require"],[19,52,2,0],[19,53,2,0,"_dependencyMap"],[19,67,2,0],[20,2,2,0],[20,6,2,0,"AsyncStorage"],[20,18,2,0],[20,21,2,0,"_interopDefault"],[20,36,2,0],[20,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,73,2,0],[21,2,59,7],[21,8,59,13,"useStore"],[21,16,59,21],[21,19,59,24],[21,23,59,24,"create"],[21,31,59,30],[21,32,59,30,"create"],[21,38,59,30],[21,40,59,41],[21,41,59,42,"set"],[21,44,59,45],[21,46,59,47,"get"],[21,49,59,50],[21,55,59,56],[22,4,60,2,"user"],[22,8,60,6],[22,10,60,8],[22,14,60,12],[23,4,61,2,"cycleData"],[23,13,61,11],[23,15,61,13],[23,19,61,17],[24,4,62,2,"intimacyEntries"],[24,19,62,17],[24,21,62,19],[24,23,62,21],[25,4,63,2,"stats"],[25,9,63,7],[25,11,63,9],[25,15,63,13],[26,4,64,2,"fertilityData"],[26,17,64,15],[26,19,64,17],[27,6,64,19,"periods"],[27,13,64,26],[27,15,64,28],[27,17,64,30],[28,6,64,32,"fertile_days"],[28,18,64,44],[28,20,64,46],[28,22,64,48],[29,6,64,50,"ovulation_days"],[29,20,64,64],[29,22,64,66],[30,4,64,69],[30,5,64,70],[31,4,65,2,"isLoading"],[31,13,65,11],[31,15,65,13],[31,19,65,17],[32,4,67,2,"setUser"],[32,11,67,9],[32,13,67,12,"user"],[32,17,67,16],[32,21,67,21,"set"],[32,24,67,24],[32,25,67,25],[33,6,67,27,"user"],[34,4,67,32],[34,5,67,33],[34,6,67,34],[35,4,68,2,"setCycleData"],[35,16,68,14],[35,18,68,17,"cycleData"],[35,27,68,26],[35,31,68,31,"set"],[35,34,68,34],[35,35,68,35],[36,6,68,37,"cycleData"],[37,4,68,47],[37,5,68,48],[37,6,68,49],[38,4,69,2,"setIntimacyEntries"],[38,22,69,20],[38,24,69,23,"intimacyEntries"],[38,39,69,38],[38,43,69,43,"set"],[38,46,69,46],[38,47,69,47],[39,6,69,49,"intimacyEntries"],[40,4,69,65],[40,5,69,66],[40,6,69,67],[41,4,70,2,"setStats"],[41,12,70,10],[41,14,70,13,"stats"],[41,19,70,18],[41,23,70,23,"set"],[41,26,70,26],[41,27,70,27],[42,6,70,29,"stats"],[43,4,70,35],[43,5,70,36],[43,6,70,37],[44,4,72,2],[45,4,73,2],[46,4,74,2,"setFertilityData"],[46,20,74,18],[46,22,74,20],[46,28,74,27,"newFertilityData"],[46,44,74,43],[46,48,74,48],[47,6,75,4],[47,12,75,10,"currentData"],[47,23,75,21],[47,26,75,24,"get"],[47,29,75,27],[47,30,75,28],[47,31,75,29],[47,32,75,30,"fertilityData"],[47,45,75,43],[49,6,77,4],[50,6,78,4],[50,12,78,10,"newDataIsEmpty"],[50,26,78,24],[50,29,78,27],[50,30,78,28,"newFertilityData"],[50,46,78,44],[50,50,79,7],[50,51,79,8],[50,52,79,9,"newFertilityData"],[50,68,79,25],[50,69,79,26,"periods"],[50,76,79,33],[50,80,79,37,"newFertilityData"],[50,96,79,53],[50,97,79,54,"periods"],[50,104,79,61],[50,105,79,62,"length"],[50,111,79,68],[50,116,79,73],[50,117,79,74],[50,123,80,8],[50,124,80,9,"newFertilityData"],[50,140,80,25],[50,141,80,26,"fertile_days"],[50,153,80,38],[50,157,80,42,"newFertilityData"],[50,173,80,58],[50,174,80,59,"fertile_days"],[50,186,80,71],[50,187,80,72,"length"],[50,193,80,78],[50,198,80,83],[50,199,80,84],[50,200,80,85],[50,205,81,8],[50,206,81,9,"newFertilityData"],[50,222,81,25],[50,223,81,26,"ovulation_days"],[50,237,81,40],[50,241,81,44,"newFertilityData"],[50,257,81,60],[50,258,81,61,"ovulation_days"],[50,272,81,75],[50,273,81,76,"length"],[50,279,81,82],[50,284,81,87],[50,285,81,88],[50,286,81,90],[51,6,83,4],[51,12,83,10,"currentDataHasValues"],[51,32,83,30],[51,35,83,33,"currentData"],[51,46,83,44],[51,51,84,8,"currentData"],[51,62,84,19],[51,63,84,20,"periods"],[51,70,84,27],[51,74,84,31,"currentData"],[51,85,84,42],[51,86,84,43,"periods"],[51,93,84,50],[51,94,84,51,"length"],[51,100,84,57],[51,103,84,60],[51,104,84,61],[51,108,85,8,"currentData"],[51,119,85,19],[51,120,85,20,"fertile_days"],[51,132,85,32],[51,136,85,36,"currentData"],[51,147,85,47],[51,148,85,48,"fertile_days"],[51,160,85,60],[51,161,85,61,"length"],[51,167,85,67],[51,170,85,70],[51,171,85,72],[51,175,86,8,"currentData"],[51,186,86,19],[51,187,86,20,"ovulation_days"],[51,201,86,34],[51,205,86,38,"currentData"],[51,216,86,49],[51,217,86,50,"ovulation_days"],[51,231,86,64],[51,232,86,65,"length"],[51,238,86,71],[51,241,86,74],[51,242,86,76],[51,243,86,77],[53,6,88,4],[54,6,89,4],[54,10,89,8,"newDataIsEmpty"],[54,24,89,22],[54,28,89,26,"currentDataHasValues"],[54,48,89,46],[54,50,89,48],[55,8,90,6,"console"],[55,15,90,13],[55,16,90,14,"log"],[55,19,90,17],[55,20,90,18],[55,77,90,75],[55,78,90,76],[56,8,91,6],[57,6,92,4],[59,6,94,4],[60,6,95,4,"set"],[60,9,95,7],[60,10,95,8],[61,8,95,10,"fertilityData"],[61,21,95,23],[61,23,95,25,"newFertilityData"],[62,6,95,42],[62,7,95,43],[62,8,95,44],[64,6,97,4],[65,6,98,4],[65,10,98,8],[66,8,99,6],[66,12,99,10],[66,13,99,11,"newDataIsEmpty"],[66,27,99,25],[66,29,99,27],[67,10,100,8],[67,16,100,14,"AsyncStorage"],[67,28,100,26],[67,29,100,26,"default"],[67,36,100,26],[67,37,100,27,"setItem"],[67,44,100,34],[67,45,100,35],[67,60,100,50],[67,62,100,52,"JSON"],[67,66,100,56],[67,67,100,57,"stringify"],[67,76,100,66],[67,77,100,67,"newFertilityData"],[67,93,100,83],[67,94,100,84],[67,95,100,85],[68,8,101,6],[69,6,102,4],[69,7,102,5],[69,8,102,6],[69,15,102,13,"e"],[69,16,102,14],[69,18,102,16],[70,8,103,6,"console"],[70,15,103,13],[70,16,103,14,"log"],[70,19,103,17],[70,20,103,18],[70,49,103,47],[70,50,103,48],[71,6,104,4],[72,4,105,2],[72,5,105,3],[73,4,107,2,"setLoading"],[73,14,107,12],[73,16,107,15,"isLoading"],[73,25,107,24],[73,29,107,29,"set"],[73,32,107,32],[73,33,107,33],[74,6,107,35,"isLoading"],[75,4,107,45],[75,5,107,46],[75,6,107,47],[76,4,109,2,"loadUser"],[76,12,109,10],[76,14,109,12],[76,20,109,12,"loadUser"],[76,21,109,12],[76,26,109,24],[77,6,110,4],[77,10,110,8],[78,8,111,6],[78,14,111,12,"userData"],[78,22,111,20],[78,25,111,23],[78,31,111,29,"AsyncStorage"],[78,43,111,41],[78,44,111,41,"default"],[78,51,111,41],[78,52,111,42,"getItem"],[78,59,111,49],[78,60,111,50],[78,66,111,56],[78,67,111,57],[79,8,112,6],[79,12,112,10,"userData"],[79,20,112,18],[79,22,112,20],[80,10,113,8,"set"],[80,13,113,11],[80,14,113,12],[81,12,113,14,"user"],[81,16,113,18],[81,18,113,20,"JSON"],[81,22,113,24],[81,23,113,25,"parse"],[81,28,113,30],[81,29,113,31,"userData"],[81,37,113,39],[81,38,113,40],[82,12,113,42,"isLoading"],[82,21,113,51],[82,23,113,53],[83,10,113,59],[83,11,113,60],[83,12,113,61],[84,8,114,6],[84,9,114,7],[84,15,114,13],[85,10,115,8,"set"],[85,13,115,11],[85,14,115,12],[86,12,115,14,"isLoading"],[86,21,115,23],[86,23,115,25],[87,10,115,31],[87,11,115,32],[87,12,115,33],[88,8,116,6],[89,6,117,4],[89,7,117,5],[89,8,117,6],[89,15,117,13,"error"],[89,20,117,18],[89,22,117,20],[90,8,118,6,"console"],[90,15,118,13],[90,16,118,14,"error"],[90,21,118,19],[90,22,118,20],[90,43,118,41],[90,45,118,43,"error"],[90,50,118,48],[90,51,118,49],[91,8,119,6,"set"],[91,11,119,9],[91,12,119,10],[92,10,119,12,"isLoading"],[92,19,119,21],[92,21,119,23],[93,8,119,29],[93,9,119,30],[93,10,119,31],[94,6,120,4],[95,4,121,2],[95,5,121,3],[96,4,123,2],[97,4,124,2,"loadFertilityData"],[97,21,124,19],[97,23,124,21],[97,29,124,21,"loadFertilityData"],[97,30,124,21],[97,35,124,33],[98,6,125,4],[98,10,125,8],[99,8,126,6],[99,14,126,12,"data"],[99,18,126,16],[99,21,126,19],[99,27,126,25,"AsyncStorage"],[99,39,126,37],[99,40,126,37,"default"],[99,47,126,37],[99,48,126,38,"getItem"],[99,55,126,45],[99,56,126,46],[99,71,126,61],[99,72,126,62],[100,8,127,6],[100,12,127,10,"data"],[100,16,127,14],[100,18,127,16],[101,10,128,8],[101,16,128,14,"parsed"],[101,22,128,20],[101,25,128,23,"JSON"],[101,29,128,27],[101,30,128,28,"parse"],[101,35,128,33],[101,36,128,34,"data"],[101,40,128,38],[101,41,128,39],[102,10,129,8,"set"],[102,13,129,11],[102,14,129,12],[103,12,129,14,"fertilityData"],[103,25,129,27],[103,27,129,29,"parsed"],[104,10,129,36],[104,11,129,37],[104,12,129,38],[105,8,130,6],[106,6,131,4],[106,7,131,5],[106,8,131,6],[106,15,131,13,"e"],[106,16,131,14],[106,18,131,16],[107,8,132,6,"console"],[107,15,132,13],[107,16,132,14,"log"],[107,19,132,17],[107,20,132,18],[107,50,132,48],[107,51,132,49],[108,6,133,4],[109,4,134,2],[109,5,134,3],[110,4,136,2,"saveUser"],[110,12,136,10],[110,14,136,12],[110,20,136,19,"user"],[110,24,136,23],[110,28,136,28],[111,6,137,4],[111,10,137,8],[112,8,138,6],[112,14,138,12,"AsyncStorage"],[112,26,138,24],[112,27,138,24,"default"],[112,34,138,24],[112,35,138,25,"setItem"],[112,42,138,32],[112,43,138,33],[112,49,138,39],[112,51,138,41,"JSON"],[112,55,138,45],[112,56,138,46,"stringify"],[112,65,138,55],[112,66,138,56,"user"],[112,70,138,60],[112,71,138,61],[112,72,138,62],[113,8,139,6,"set"],[113,11,139,9],[113,12,139,10],[114,10,139,12,"user"],[115,8,139,17],[115,9,139,18],[115,10,139,19],[116,6,140,4],[116,7,140,5],[116,8,140,6],[116,15,140,13,"error"],[116,20,140,18],[116,22,140,20],[117,8,141,6,"console"],[117,15,141,13],[117,16,141,14,"error"],[117,21,141,19],[117,22,141,20],[117,42,141,40],[117,44,141,42,"error"],[117,49,141,47],[117,50,141,48],[118,6,142,4],[119,4,143,2],[119,5,143,3],[120,4,145,2,"logout"],[120,10,145,8],[120,12,145,10],[120,18,145,10,"logout"],[120,19,145,10],[120,24,145,22],[121,6,146,4],[121,10,146,8],[122,8,147,6],[122,14,147,12,"AsyncStorage"],[122,26,147,24],[122,27,147,24,"default"],[122,34,147,24],[122,35,147,25,"removeItem"],[122,45,147,35],[122,46,147,36],[122,52,147,42],[122,53,147,43],[123,8,148,6],[123,14,148,12,"AsyncStorage"],[123,26,148,24],[123,27,148,24,"default"],[123,34,148,24],[123,35,148,25,"removeItem"],[123,45,148,35],[123,46,148,36],[123,61,148,51],[123,62,148,52],[124,8,149,6,"set"],[124,11,149,9],[124,12,149,10],[125,10,149,12,"user"],[125,14,149,16],[125,16,149,18],[125,20,149,22],[126,10,149,24,"cycleData"],[126,19,149,33],[126,21,149,35],[126,25,149,39],[127,10,149,41,"intimacyEntries"],[127,25,149,56],[127,27,149,58],[127,29,149,60],[128,10,149,62,"stats"],[128,15,149,67],[128,17,149,69],[128,21,149,73],[129,10,149,75,"fertilityData"],[129,23,149,88],[129,25,149,90],[130,12,149,92,"periods"],[130,19,149,99],[130,21,149,101],[130,23,149,103],[131,12,149,105,"fertile_days"],[131,24,149,117],[131,26,149,119],[131,28,149,121],[132,12,149,123,"ovulation_days"],[132,26,149,137],[132,28,149,139],[133,10,149,142],[134,8,149,144],[134,9,149,145],[134,10,149,146],[135,6,150,4],[135,7,150,5],[135,8,150,6],[135,15,150,13,"error"],[135,20,150,18],[135,22,150,20],[136,8,151,6,"console"],[136,15,151,13],[136,16,151,14,"error"],[136,21,151,19],[136,22,151,20],[136,42,151,40],[136,44,151,42,"error"],[136,49,151,47],[136,50,151,48],[137,6,152,4],[138,4,153,2],[139,2,154,0],[139,3,154,1],[139,4,154,2],[139,5,154,3],[140,0,154,4],[140,3]],"functionMap":{"names":["<global>","create$argument_0","setUser","setCycleData","setIntimacyEntries","setStats","setFertilityData","setLoading","loadUser","loadFertilityData","saveUser","logout"],"mappings":"AAA;yCC0D;WCQ,uBD;gBEC,iCF;sBGC,6CH;YIC,yBJ;oBKI;GL+B;cME,iCN;YOE;GPY;qBQG;GRU;YSE;GTO;UUE;GVQ;EDC"},"hasCjsExports":false},"type":"js/module"}]}