{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":50},"end":{"line":2,"column":36,"index":86}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"expo-status-bar","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":87},"end":{"line":3,"column":44,"index":131}}],"key":"tlkgvZrxUMG8C7vDDJbsBGIlvhs=","exportNames":["*"],"imports":1}},{"name":"react-native-safe-area-context","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":132},"end":{"line":4,"column":66,"index":198}}],"key":"XjdTKvCUWX6CbQzg5fSDHG/WgHk=","exportNames":["*"],"imports":1}},{"name":"../store/useStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":199},"end":{"line":5,"column":45,"index":244}}],"key":"ASBgiPI21VzTbw57ZrWjZ5L1SH8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"../services/notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":286},"end":{"line":12,"column":35,"index":455}}],"key":"PilFUkBfYpg1cVGLNRiWDw/oULQ=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/_layout.tsx\",\n    _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return RootLayout;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoRouter = require(_dependencyMap[1], \"expo-router\");\n  var _expoStatusBar = require(_dependencyMap[2], \"expo-status-bar\");\n  var _reactNativeSafeAreaContext = require(_dependencyMap[3], \"react-native-safe-area-context\");\n  var _storeUseStore = require(_dependencyMap[4], \"../store/useStore\");\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[5], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _servicesNotifications = require(_dependencyMap[6], \"../services/notifications\");\n  var _reactJsxDevRuntime = require(_dependencyMap[7], \"react/jsx-dev-runtime\");\n  function RootLayout() {\n    _s();\n    const {\n      loadUser,\n      user\n    } = (0, _storeUseStore.useStore)();\n    const notificationListener = (0, _react.useRef)();\n    const responseListener = (0, _react.useRef)();\n    (0, _react.useEffect)(() => {\n      loadUser();\n\n      // Setup notifications (only on device, not web)\n      if (Platform.default.OS !== 'web') {\n        setupNotifications();\n      }\n      return () => {\n        if (notificationListener.current && typeof notificationListener.current.remove === 'function') {\n          notificationListener.current.remove();\n        }\n        if (responseListener.current && typeof responseListener.current.remove === 'function') {\n          responseListener.current.remove();\n        }\n      };\n    }, []);\n    const setupNotifications = async () => {\n      try {\n        // Register for push notifications\n        const token = await (0, _servicesNotifications.registerForPushNotificationsAsync)();\n        console.log('Push notification token:', token);\n\n        // Schedule daily mood reminder\n        await (0, _servicesNotifications.scheduleMoodReminder)();\n\n        // Listen for incoming notifications\n        notificationListener.current = (0, _servicesNotifications.addNotificationListener)(notification => {\n          console.log('Notification received:', notification);\n        });\n\n        // Listen for notification responses (when user taps)\n        responseListener.current = (0, _servicesNotifications.addNotificationResponseListener)(response => {\n          console.log('Notification tapped:', response);\n          // Handle navigation based on notification type\n          const data = response.notification.request.content.data;\n          // Can navigate to specific screens based on data.type\n        });\n      } catch (error) {\n        console.log('Notification setup error:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_reactNativeSafeAreaContext.SafeAreaProvider, {\n      children: [/*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_expoStatusBar.StatusBar, {\n        style: \"light\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 7\n      }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_expoRouter.Stack, {\n        screenOptions: {\n          headerShown: false,\n          contentStyle: {\n            backgroundColor: '#1a1a2e'\n          },\n          animation: 'slide_from_right'\n        },\n        children: [/*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_expoRouter.Stack.Screen, {\n          name: \"index\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 9\n        }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_expoRouter.Stack.Screen, {\n          name: \"(tabs)\",\n          options: {\n            headerShown: false\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 9\n        }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_expoRouter.Stack.Screen, {\n          name: \"settings\",\n          options: {\n            presentation: 'modal'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }, this);\n  }\n  _s(RootLayout, \"yVIV5RKyORvuR1ww1hkIW5WwFW0=\", false, function () {\n    return [_storeUseStore.useStore];\n  });\n  _c = RootLayout;\n  var _c;\n  $RefreshReg$(_c, \"RootLayout\");\n});","lineCount":135,"map":[[14,2,15,15,"Object"],[14,8,15,15],[14,9,15,15,"defineProperty"],[14,23,15,15],[14,24,15,15,"exports"],[14,31,15,15],[15,4,15,15,"enumerable"],[15,14,15,15],[16,4,15,15,"get"],[16,7,15,15],[16,18,15,15,"get"],[16,19,15,15],[17,6,15,15],[17,13,15,15,"RootLayout"],[17,23,15,15],[18,4,15,15],[19,2,15,15],[20,2,1,0],[20,6,1,0,"_react"],[20,12,1,0],[20,15,1,0,"require"],[20,22,1,0],[20,23,1,0,"_dependencyMap"],[20,37,1,0],[21,2,2,0],[21,6,2,0,"_expoRouter"],[21,17,2,0],[21,20,2,0,"require"],[21,27,2,0],[21,28,2,0,"_dependencyMap"],[21,42,2,0],[22,2,3,0],[22,6,3,0,"_expoStatusBar"],[22,20,3,0],[22,23,3,0,"require"],[22,30,3,0],[22,31,3,0,"_dependencyMap"],[22,45,3,0],[23,2,4,0],[23,6,4,0,"_reactNativeSafeAreaContext"],[23,33,4,0],[23,36,4,0,"require"],[23,43,4,0],[23,44,4,0,"_dependencyMap"],[23,58,4,0],[24,2,5,0],[24,6,5,0,"_storeUseStore"],[24,20,5,0],[24,23,5,0,"require"],[24,30,5,0],[24,31,5,0,"_dependencyMap"],[24,45,5,0],[25,2,5,45],[25,6,5,45,"_reactNativeWebDistExportsPlatform"],[25,40,5,45],[25,43,5,45,"require"],[25,50,5,45],[25,51,5,45,"_dependencyMap"],[25,65,5,45],[26,2,5,45],[26,6,5,45,"Platform"],[26,14,5,45],[26,17,5,45,"_interopDefault"],[26,32,5,45],[26,33,5,45,"_reactNativeWebDistExportsPlatform"],[26,67,5,45],[27,2,7,0],[27,6,7,0,"_servicesNotifications"],[27,28,7,0],[27,31,7,0,"require"],[27,38,7,0],[27,39,7,0,"_dependencyMap"],[27,53,7,0],[28,2,12,35],[28,6,12,35,"_reactJsxDevRuntime"],[28,25,12,35],[28,28,12,35,"require"],[28,35,12,35],[28,36,12,35,"_dependencyMap"],[28,50,12,35],[29,2,15,15],[29,11,15,24,"RootLayout"],[29,21,15,34,"RootLayout"],[29,22,15,34],[29,24,15,37],[30,4,15,37,"_s"],[30,6,15,37],[31,4,16,2],[31,10,16,8],[32,6,16,10,"loadUser"],[32,14,16,18],[33,6,16,20,"user"],[34,4,16,25],[34,5,16,26],[34,8,16,29],[34,12,16,29,"useStore"],[34,26,16,37],[34,27,16,37,"useStore"],[34,35,16,37],[34,37,16,38],[34,38,16,39],[35,4,17,2],[35,10,17,8,"notificationListener"],[35,30,17,28],[35,33,17,31],[35,37,17,31,"useRef"],[35,43,17,37],[35,44,17,37,"useRef"],[35,50,17,37],[35,52,17,43],[35,53,17,44],[36,4,18,2],[36,10,18,8,"responseListener"],[36,26,18,24],[36,29,18,27],[36,33,18,27,"useRef"],[36,39,18,33],[36,40,18,33,"useRef"],[36,46,18,33],[36,48,18,39],[36,49,18,40],[37,4,20,2],[37,8,20,2,"useEffect"],[37,14,20,11],[37,15,20,11,"useEffect"],[37,24,20,11],[37,26,20,12],[37,32,20,18],[38,6,21,4,"loadUser"],[38,14,21,12],[38,15,21,13],[38,16,21,14],[40,6,23,4],[41,6,24,4],[41,10,24,8,"Platform"],[41,18,24,16],[41,19,24,16,"default"],[41,26,24,16],[41,27,24,17,"OS"],[41,29,24,19],[41,34,24,24],[41,39,24,29],[41,41,24,31],[42,8,25,6,"setupNotifications"],[42,26,25,24],[42,27,25,25],[42,28,25,26],[43,6,26,4],[44,6,28,4],[44,13,28,11],[44,19,28,17],[45,8,29,6],[45,12,29,10,"notificationListener"],[45,32,29,30],[45,33,29,31,"current"],[45,40,29,38],[45,44,29,42],[45,51,29,49,"notificationListener"],[45,71,29,69],[45,72,29,70,"current"],[45,79,29,77],[45,80,29,78,"remove"],[45,86,29,84],[45,91,29,89],[45,101,29,99],[45,103,29,101],[46,10,30,8,"notificationListener"],[46,30,30,28],[46,31,30,29,"current"],[46,38,30,36],[46,39,30,37,"remove"],[46,45,30,43],[46,46,30,44],[46,47,30,45],[47,8,31,6],[48,8,32,6],[48,12,32,10,"responseListener"],[48,28,32,26],[48,29,32,27,"current"],[48,36,32,34],[48,40,32,38],[48,47,32,45,"responseListener"],[48,63,32,61],[48,64,32,62,"current"],[48,71,32,69],[48,72,32,70,"remove"],[48,78,32,76],[48,83,32,81],[48,93,32,91],[48,95,32,93],[49,10,33,8,"responseListener"],[49,26,33,24],[49,27,33,25,"current"],[49,34,33,32],[49,35,33,33,"remove"],[49,41,33,39],[49,42,33,40],[49,43,33,41],[50,8,34,6],[51,6,35,4],[51,7,35,5],[52,4,36,2],[52,5,36,3],[52,7,36,5],[52,9,36,7],[52,10,36,8],[53,4,38,2],[53,10,38,8,"setupNotifications"],[53,28,38,26],[53,31,38,29],[53,37,38,29,"setupNotifications"],[53,38,38,29],[53,43,38,41],[54,6,39,4],[54,10,39,8],[55,8,40,6],[56,8,41,6],[56,14,41,12,"token"],[56,19,41,17],[56,22,41,20],[56,28,41,26],[56,32,41,26,"registerForPushNotificationsAsync"],[56,54,41,59],[56,55,41,59,"registerForPushNotificationsAsync"],[56,88,41,59],[56,90,41,60],[56,91,41,61],[57,8,42,6,"console"],[57,15,42,13],[57,16,42,14,"log"],[57,19,42,17],[57,20,42,18],[57,46,42,44],[57,48,42,46,"token"],[57,53,42,51],[57,54,42,52],[59,8,44,6],[60,8,45,6],[60,14,45,12],[60,18,45,12,"scheduleMoodReminder"],[60,40,45,32],[60,41,45,32,"scheduleMoodReminder"],[60,61,45,32],[60,63,45,33],[60,64,45,34],[62,8,47,6],[63,8,48,6,"notificationListener"],[63,28,48,26],[63,29,48,27,"current"],[63,36,48,34],[63,39,48,37],[63,43,48,37,"addNotificationListener"],[63,65,48,60],[63,66,48,60,"addNotificationListener"],[63,89,48,60],[63,91,48,61,"notification"],[63,103,48,73],[63,107,48,77],[64,10,49,8,"console"],[64,17,49,15],[64,18,49,16,"log"],[64,21,49,19],[64,22,49,20],[64,46,49,44],[64,48,49,46,"notification"],[64,60,49,58],[64,61,49,59],[65,8,50,6],[65,9,50,7],[65,10,50,8],[67,8,52,6],[68,8,53,6,"responseListener"],[68,24,53,22],[68,25,53,23,"current"],[68,32,53,30],[68,35,53,33],[68,39,53,33,"addNotificationResponseListener"],[68,61,53,64],[68,62,53,64,"addNotificationResponseListener"],[68,93,53,64],[68,95,53,65,"response"],[68,103,53,73],[68,107,53,77],[69,10,54,8,"console"],[69,17,54,15],[69,18,54,16,"log"],[69,21,54,19],[69,22,54,20],[69,44,54,42],[69,46,54,44,"response"],[69,54,54,52],[69,55,54,53],[70,10,55,8],[71,10,56,8],[71,16,56,14,"data"],[71,20,56,18],[71,23,56,21,"response"],[71,31,56,29],[71,32,56,30,"notification"],[71,44,56,42],[71,45,56,43,"request"],[71,52,56,50],[71,53,56,51,"content"],[71,60,56,58],[71,61,56,59,"data"],[71,65,56,63],[72,10,57,8],[73,8,58,6],[73,9,58,7],[73,10,58,8],[74,6,59,4],[74,7,59,5],[74,8,59,6],[74,15,59,13,"error"],[74,20,59,18],[74,22,59,20],[75,8,60,6,"console"],[75,15,60,13],[75,16,60,14,"log"],[75,19,60,17],[75,20,60,18],[75,47,60,45],[75,49,60,47,"error"],[75,54,60,52],[75,55,60,53],[76,6,61,4],[77,4,62,2],[77,5,62,3],[78,4,64,2],[78,24,65,4],[78,28,65,4,"_reactJsxDevRuntime"],[78,47,65,4],[78,48,65,4,"jsxDEV"],[78,54,65,4],[78,56,65,5,"_reactNativeSafeAreaContext"],[78,83,65,21],[78,84,65,21,"SafeAreaProvider"],[78,100,65,21],[79,6,65,21,"children"],[79,14,65,21],[79,30,66,6],[79,34,66,6,"_reactJsxDevRuntime"],[79,53,66,6],[79,54,66,6,"jsxDEV"],[79,60,66,6],[79,62,66,7,"_expoStatusBar"],[79,76,66,16],[79,77,66,16,"StatusBar"],[79,86,66,16],[80,8,66,17,"style"],[80,13,66,22],[80,15,66,23],[81,6,66,30],[82,8,66,30,"fileName"],[82,16,66,30],[82,18,66,30,"_jsxFileName"],[82,30,66,30],[83,8,66,30,"lineNumber"],[83,18,66,30],[84,8,66,30,"columnNumber"],[84,20,66,30],[85,6,66,30],[85,13,66,32],[85,14,66,33],[85,29,67,6],[85,33,67,6,"_reactJsxDevRuntime"],[85,52,67,6],[85,53,67,6,"jsxDEV"],[85,59,67,6],[85,61,67,7,"_expoRouter"],[85,72,67,12],[85,73,67,12,"Stack"],[85,78,67,12],[86,8,68,8,"screenOptions"],[86,21,68,21],[86,23,68,23],[87,10,69,10,"headerShown"],[87,21,69,21],[87,23,69,23],[87,28,69,28],[88,10,70,10,"contentStyle"],[88,22,70,22],[88,24,70,24],[89,12,70,26,"backgroundColor"],[89,27,70,41],[89,29,70,43],[90,10,70,53],[90,11,70,54],[91,10,71,10,"animation"],[91,19,71,19],[91,21,71,21],[92,8,72,8],[92,9,72,10],[93,8,72,10,"children"],[93,16,72,10],[93,32,74,8],[93,36,74,8,"_reactJsxDevRuntime"],[93,55,74,8],[93,56,74,8,"jsxDEV"],[93,62,74,8],[93,64,74,9,"_expoRouter"],[93,75,74,14],[93,76,74,14,"Stack"],[93,81,74,14],[93,82,74,15,"Screen"],[93,88,74,21],[94,10,74,22,"name"],[94,14,74,26],[94,16,74,27],[95,8,74,34],[96,10,74,34,"fileName"],[96,18,74,34],[96,20,74,34,"_jsxFileName"],[96,32,74,34],[97,10,74,34,"lineNumber"],[97,20,74,34],[98,10,74,34,"columnNumber"],[98,22,74,34],[99,8,74,34],[99,15,74,36],[99,16,74,37],[99,31,75,8],[99,35,75,8,"_reactJsxDevRuntime"],[99,54,75,8],[99,55,75,8,"jsxDEV"],[99,61,75,8],[99,63,75,9,"_expoRouter"],[99,74,75,14],[99,75,75,14,"Stack"],[99,80,75,14],[99,81,75,15,"Screen"],[99,87,75,21],[100,10,75,22,"name"],[100,14,75,26],[100,16,75,27],[100,24,75,35],[101,10,75,36,"options"],[101,17,75,43],[101,19,75,45],[102,12,75,47,"headerShown"],[102,23,75,58],[102,25,75,60],[103,10,75,66],[104,8,75,68],[105,10,75,68,"fileName"],[105,18,75,68],[105,20,75,68,"_jsxFileName"],[105,32,75,68],[106,10,75,68,"lineNumber"],[106,20,75,68],[107,10,75,68,"columnNumber"],[107,22,75,68],[108,8,75,68],[108,15,75,70],[108,16,75,71],[108,31,76,8],[108,35,76,8,"_reactJsxDevRuntime"],[108,54,76,8],[108,55,76,8,"jsxDEV"],[108,61,76,8],[108,63,76,9,"_expoRouter"],[108,74,76,14],[108,75,76,14,"Stack"],[108,80,76,14],[108,81,76,15,"Screen"],[108,87,76,21],[109,10,76,22,"name"],[109,14,76,26],[109,16,76,27],[109,26,76,37],[110,10,76,38,"options"],[110,17,76,45],[110,19,76,47],[111,12,76,49,"presentation"],[111,24,76,61],[111,26,76,63],[112,10,76,71],[113,8,76,73],[114,10,76,73,"fileName"],[114,18,76,73],[114,20,76,73,"_jsxFileName"],[114,32,76,73],[115,10,76,73,"lineNumber"],[115,20,76,73],[116,10,76,73,"columnNumber"],[116,22,76,73],[117,8,76,73],[117,15,76,75],[117,16,76,76],[118,6,76,76],[119,8,76,76,"fileName"],[119,16,76,76],[119,18,76,76,"_jsxFileName"],[119,30,76,76],[120,8,76,76,"lineNumber"],[120,18,76,76],[121,8,76,76,"columnNumber"],[121,20,76,76],[122,6,76,76],[122,13,77,13],[122,14,77,14],[123,4,77,14],[124,6,77,14,"fileName"],[124,14,77,14],[124,16,77,14,"_jsxFileName"],[124,28,77,14],[125,6,77,14,"lineNumber"],[125,16,77,14],[126,6,77,14,"columnNumber"],[126,18,77,14],[127,4,77,14],[127,11,78,22],[127,12,78,23],[128,2,80,0],[129,2,80,1,"_s"],[129,4,80,1],[129,5,15,24,"RootLayout"],[129,15,15,34],[130,4,15,34],[130,12,16,29,"useStore"],[130,26,16,37],[130,27,16,37,"useStore"],[130,35,16,37],[131,2,16,37],[132,2,16,37,"_c"],[132,4,16,37],[132,7,15,24,"RootLayout"],[132,17,15,34],[133,2,15,34],[133,6,15,34,"_c"],[133,8,15,34],[134,2,15,34,"$RefreshReg$"],[134,14,15,34],[134,15,15,34,"_c"],[134,17,15,34],[135,0,15,34],[135,3]],"functionMap":{"names":["<global>","RootLayout","useEffect$argument_0","<anonymous>","setupNotifications","addNotificationListener$argument_0","addNotificationResponseListener$argument_0"],"mappings":"AAA;eCc;YCK;WCQ;KDO;GDC;6BGE;6DCU;ODE;iEEG;OFK;GHI;CDkB"},"hasCjsExports":false},"type":"js/module"}]}