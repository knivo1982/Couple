{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":50},"end":{"line":2,"column":36,"index":86}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"expo-status-bar","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":87},"end":{"line":3,"column":44,"index":131}}],"key":"tlkgvZrxUMG8C7vDDJbsBGIlvhs=","exportNames":["*"],"imports":1}},{"name":"react-native-safe-area-context","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":132},"end":{"line":4,"column":66,"index":198}}],"key":"XjdTKvCUWX6CbQzg5fSDHG/WgHk=","exportNames":["*"],"imports":1}},{"name":"../store/useStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":199},"end":{"line":5,"column":45,"index":244}}],"key":"ASBgiPI21VzTbw57ZrWjZ5L1SH8=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":245},"end":{"line":6,"column":40,"index":285}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"../services/notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":286},"end":{"line":12,"column":35,"index":455}}],"key":"PilFUkBfYpg1cVGLNRiWDw/oULQ=","exportNames":["*"],"imports":1}},{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":13,"column":0,"index":456},"end":{"line":13,"column":52,"index":508}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"react/jsx-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"3suYSPX9nHbHZ1xNTsKXtKj0atE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return RootLayout;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0]);\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _react = require(_dependencyMap[1]);\n  var _expoRouter = require(_dependencyMap[2]);\n  var _expoStatusBar = require(_dependencyMap[3]);\n  var _reactNativeSafeAreaContext = require(_dependencyMap[4]);\n  var _storeUseStore = require(_dependencyMap[5]);\n  require(_dependencyMap[6]);\n  var _servicesNotifications = require(_dependencyMap[7]);\n  var _expoNotifications = require(_dependencyMap[8]);\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _reactJsxRuntime = require(_dependencyMap[9]);\n  function RootLayout() {\n    var _useStore = (0, _storeUseStore.useStore)(),\n      loadUser = _useStore.loadUser,\n      user = _useStore.user;\n    var notificationListener = (0, _react.useRef)();\n    var responseListener = (0, _react.useRef)();\n    (0, _react.useEffect)(() => {\n      loadUser();\n\n      // Setup notifications (only on device, not web)\n      {\n        setupNotifications();\n      }\n      return () => {\n        if (notificationListener.current) {\n          Notifications.removeNotificationSubscription(notificationListener.current);\n        }\n        if (responseListener.current) {\n          Notifications.removeNotificationSubscription(responseListener.current);\n        }\n      };\n    }, []);\n    var setupNotifications = /*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* () {\n        try {\n          // Register for push notifications\n          var token = yield (0, _servicesNotifications.registerForPushNotificationsAsync)();\n          console.log('Push notification token:', token);\n\n          // Schedule daily mood reminder\n          yield (0, _servicesNotifications.scheduleMoodReminder)();\n\n          // Listen for incoming notifications\n          notificationListener.current = (0, _servicesNotifications.addNotificationListener)(notification => {\n            console.log('Notification received:', notification);\n          });\n\n          // Listen for notification responses (when user taps)\n          responseListener.current = (0, _servicesNotifications.addNotificationResponseListener)(response => {\n            console.log('Notification tapped:', response);\n            // Handle navigation based on notification type\n            var data = response.notification.request.content.data;\n            // Can navigate to specific screens based on data.type\n          });\n        } catch (error) {\n          console.log('Notification setup error:', error);\n        }\n      });\n      return function setupNotifications() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    return /*#__PURE__*/(0, _reactJsxRuntime.jsxs)(_reactNativeSafeAreaContext.SafeAreaProvider, {\n      children: [/*#__PURE__*/(0, _reactJsxRuntime.jsx)(_expoStatusBar.StatusBar, {\n        style: \"light\"\n      }), /*#__PURE__*/(0, _reactJsxRuntime.jsxs)(_expoRouter.Stack, {\n        screenOptions: {\n          headerShown: false,\n          contentStyle: {\n            backgroundColor: '#1a1a2e'\n          },\n          animation: 'slide_from_right'\n        },\n        children: [/*#__PURE__*/(0, _reactJsxRuntime.jsx)(_expoRouter.Stack.Screen, {\n          name: \"index\"\n        }), /*#__PURE__*/(0, _reactJsxRuntime.jsx)(_expoRouter.Stack.Screen, {\n          name: \"onboarding\",\n          options: {\n            animation: 'fade'\n          }\n        }), /*#__PURE__*/(0, _reactJsxRuntime.jsx)(_expoRouter.Stack.Screen, {\n          name: \"paywall\",\n          options: {\n            presentation: 'modal',\n            animation: 'slide_from_bottom'\n          }\n        }), /*#__PURE__*/(0, _reactJsxRuntime.jsx)(_expoRouter.Stack.Screen, {\n          name: \"(tabs)\",\n          options: {\n            headerShown: false\n          }\n        }), /*#__PURE__*/(0, _reactJsxRuntime.jsx)(_expoRouter.Stack.Screen, {\n          name: \"settings\",\n          options: {\n            presentation: 'modal'\n          }\n        })]\n      })]\n    });\n  }\n});","lineCount":135,"map":[[27,2,15,15,"Object"],[27,8,15,15],[27,9,15,15,"defineProperty"],[27,23,15,15],[27,24,15,15,"exports"],[27,31,15,15],[28,4,15,15,"enumerable"],[28,14,15,15],[29,4,15,15,"get"],[29,7,15,15],[29,18,15,15,"get"],[29,19,15,15],[30,6,15,15],[30,13,15,15,"RootLayout"],[30,23,15,15],[31,4,15,15],[32,2,15,15],[33,2,82,1],[33,6,82,1,"_babelRuntimeHelpersAsyncToGenerator"],[33,42,82,1],[33,45,82,1,"require"],[33,52,82,1],[33,53,82,1,"_dependencyMap"],[33,67,82,1],[34,2,82,1],[34,6,82,1,"_asyncToGenerator"],[34,23,82,1],[34,26,82,1,"_interopDefault"],[34,41,82,1],[34,42,82,1,"_babelRuntimeHelpersAsyncToGenerator"],[34,78,82,1],[35,2,1,0],[35,6,1,0,"_react"],[35,12,1,0],[35,15,1,0,"require"],[35,22,1,0],[35,23,1,0,"_dependencyMap"],[35,37,1,0],[36,2,2,0],[36,6,2,0,"_expoRouter"],[36,17,2,0],[36,20,2,0,"require"],[36,27,2,0],[36,28,2,0,"_dependencyMap"],[36,42,2,0],[37,2,3,0],[37,6,3,0,"_expoStatusBar"],[37,20,3,0],[37,23,3,0,"require"],[37,30,3,0],[37,31,3,0,"_dependencyMap"],[37,45,3,0],[38,2,4,0],[38,6,4,0,"_reactNativeSafeAreaContext"],[38,33,4,0],[38,36,4,0,"require"],[38,43,4,0],[38,44,4,0,"_dependencyMap"],[38,58,4,0],[39,2,5,0],[39,6,5,0,"_storeUseStore"],[39,20,5,0],[39,23,5,0,"require"],[39,30,5,0],[39,31,5,0,"_dependencyMap"],[39,45,5,0],[40,2,6,0,"require"],[40,9,6,0],[40,10,6,0,"_dependencyMap"],[40,24,6,0],[41,2,7,0],[41,6,7,0,"_servicesNotifications"],[41,28,7,0],[41,31,7,0,"require"],[41,38,7,0],[41,39,7,0,"_dependencyMap"],[41,53,7,0],[42,2,13,0],[42,6,13,0,"_expoNotifications"],[42,24,13,0],[42,27,13,0,"require"],[42,34,13,0],[42,35,13,0,"_dependencyMap"],[42,49,13,0],[43,2,13,0],[43,6,13,0,"Notifications"],[43,19,13,0],[43,22,13,0,"_interopNamespace"],[43,39,13,0],[43,40,13,0,"_expoNotifications"],[43,58,13,0],[44,2,13,52],[44,6,13,52,"_reactJsxRuntime"],[44,22,13,52],[44,25,13,52,"require"],[44,32,13,52],[44,33,13,52,"_dependencyMap"],[44,47,13,52],[45,2,15,15],[45,11,15,24,"RootLayout"],[45,21,15,34,"RootLayout"],[45,22,15,34],[45,24,15,37],[46,4,16,2],[46,8,16,2,"_useStore"],[46,17,16,2],[46,20,16,29],[46,24,16,29,"useStore"],[46,38,16,37],[46,39,16,37,"useStore"],[46,47,16,37],[46,49,16,38],[46,50,16,39],[47,6,16,10,"loadUser"],[47,14,16,18],[47,17,16,18,"_useStore"],[47,26,16,18],[47,27,16,10,"loadUser"],[47,35,16,18],[48,6,16,20,"user"],[48,10,16,24],[48,13,16,24,"_useStore"],[48,22,16,24],[48,23,16,20,"user"],[48,27,16,24],[49,4,17,2],[49,8,17,8,"notificationListener"],[49,28,17,28],[49,31,17,31],[49,35,17,31,"useRef"],[49,41,17,37],[49,42,17,37,"useRef"],[49,48,17,37],[49,50,17,43],[49,51,17,44],[50,4,18,2],[50,8,18,8,"responseListener"],[50,24,18,24],[50,27,18,27],[50,31,18,27,"useRef"],[50,37,18,33],[50,38,18,33,"useRef"],[50,44,18,33],[50,46,18,39],[50,47,18,40],[51,4,20,2],[51,8,20,2,"useEffect"],[51,14,20,11],[51,15,20,11,"useEffect"],[51,24,20,11],[51,26,20,12],[51,32,20,18],[52,6,21,4,"loadUser"],[52,14,21,12],[52,15,21,13],[52,16,21,14],[54,6,23,4],[55,6,24,31],[56,8,25,6,"setupNotifications"],[56,26,25,24],[56,27,25,25],[56,28,25,26],[57,6,26,4],[58,6,28,4],[58,13,28,11],[58,19,28,17],[59,8,29,6],[59,12,29,10,"notificationListener"],[59,32,29,30],[59,33,29,31,"current"],[59,40,29,38],[59,42,29,40],[60,10,30,8,"Notifications"],[60,23,30,21],[60,24,30,22,"removeNotificationSubscription"],[60,54,30,52],[60,55,30,53,"notificationListener"],[60,75,30,73],[60,76,30,74,"current"],[60,83,30,81],[60,84,30,82],[61,8,31,6],[62,8,32,6],[62,12,32,10,"responseListener"],[62,28,32,26],[62,29,32,27,"current"],[62,36,32,34],[62,38,32,36],[63,10,33,8,"Notifications"],[63,23,33,21],[63,24,33,22,"removeNotificationSubscription"],[63,54,33,52],[63,55,33,53,"responseListener"],[63,71,33,69],[63,72,33,70,"current"],[63,79,33,77],[63,80,33,78],[64,8,34,6],[65,6,35,4],[65,7,35,5],[66,4,36,2],[66,5,36,3],[66,7,36,5],[66,9,36,7],[66,10,36,8],[67,4,38,2],[67,8,38,8,"setupNotifications"],[67,26,38,26],[68,6,38,26],[68,10,38,26,"_ref"],[68,14,38,26],[68,21,38,26,"_asyncToGenerator"],[68,38,38,26],[68,39,38,26,"default"],[68,46,38,26],[68,48,38,29],[68,61,38,41],[69,8,39,4],[69,12,39,8],[70,10,40,6],[71,10,41,6],[71,14,41,12,"token"],[71,19,41,17],[71,28,41,26],[71,32,41,26,"registerForPushNotificationsAsync"],[71,54,41,59],[71,55,41,59,"registerForPushNotificationsAsync"],[71,88,41,59],[71,90,41,60],[71,91,41,61],[72,10,42,6,"console"],[72,17,42,13],[72,18,42,14,"log"],[72,21,42,17],[72,22,42,18],[72,48,42,44],[72,50,42,46,"token"],[72,55,42,51],[72,56,42,52],[74,10,44,6],[75,10,45,6],[75,16,45,12],[75,20,45,12,"scheduleMoodReminder"],[75,42,45,32],[75,43,45,32,"scheduleMoodReminder"],[75,63,45,32],[75,65,45,33],[75,66,45,34],[77,10,47,6],[78,10,48,6,"notificationListener"],[78,30,48,26],[78,31,48,27,"current"],[78,38,48,34],[78,41,48,37],[78,45,48,37,"addNotificationListener"],[78,67,48,60],[78,68,48,60,"addNotificationListener"],[78,91,48,60],[78,93,48,61,"notification"],[78,105,48,73],[78,109,48,77],[79,12,49,8,"console"],[79,19,49,15],[79,20,49,16,"log"],[79,23,49,19],[79,24,49,20],[79,48,49,44],[79,50,49,46,"notification"],[79,62,49,58],[79,63,49,59],[80,10,50,6],[80,11,50,7],[80,12,50,8],[82,10,52,6],[83,10,53,6,"responseListener"],[83,26,53,22],[83,27,53,23,"current"],[83,34,53,30],[83,37,53,33],[83,41,53,33,"addNotificationResponseListener"],[83,63,53,64],[83,64,53,64,"addNotificationResponseListener"],[83,95,53,64],[83,97,53,65,"response"],[83,105,53,73],[83,109,53,77],[84,12,54,8,"console"],[84,19,54,15],[84,20,54,16,"log"],[84,23,54,19],[84,24,54,20],[84,46,54,42],[84,48,54,44,"response"],[84,56,54,52],[84,57,54,53],[85,12,55,8],[86,12,56,8],[86,16,56,14,"data"],[86,20,56,18],[86,23,56,21,"response"],[86,31,56,29],[86,32,56,30,"notification"],[86,44,56,42],[86,45,56,43,"request"],[86,52,56,50],[86,53,56,51,"content"],[86,60,56,58],[86,61,56,59,"data"],[86,65,56,63],[87,12,57,8],[88,10,58,6],[88,11,58,7],[88,12,58,8],[89,8,59,4],[89,9,59,5],[89,10,59,6],[89,17,59,13,"error"],[89,22,59,18],[89,24,59,20],[90,10,60,6,"console"],[90,17,60,13],[90,18,60,14,"log"],[90,21,60,17],[90,22,60,18],[90,49,60,45],[90,51,60,47,"error"],[90,56,60,52],[90,57,60,53],[91,8,61,4],[92,6,62,2],[92,7,62,3],[93,6,62,3],[93,22,38,8,"setupNotifications"],[93,40,38,26,"setupNotifications"],[93,41,38,26],[94,8,38,26],[94,15,38,26,"_ref"],[94,19,38,26],[94,20,38,26,"apply"],[94,25,38,26],[94,32,38,26,"arguments"],[94,41,38,26],[95,6,38,26],[96,4,38,26],[96,7,62,3],[97,4,64,2],[97,24,65,4],[97,28,65,4,"_reactJsxRuntime"],[97,44,65,4],[97,45,65,4,"jsxs"],[97,49,65,4],[97,51,65,5,"_reactNativeSafeAreaContext"],[97,78,65,21],[97,79,65,21,"SafeAreaProvider"],[97,95,65,21],[98,6,65,21,"children"],[98,14,65,21],[98,30,66,6],[98,34,66,6,"_reactJsxRuntime"],[98,50,66,6],[98,51,66,6,"jsx"],[98,54,66,6],[98,56,66,7,"_expoStatusBar"],[98,70,66,16],[98,71,66,16,"StatusBar"],[98,80,66,16],[99,8,66,17,"style"],[99,13,66,22],[99,15,66,23],[100,6,66,30],[100,7,66,32],[100,8,66,33],[100,23,67,6],[100,27,67,6,"_reactJsxRuntime"],[100,43,67,6],[100,44,67,6,"jsxs"],[100,48,67,6],[100,50,67,7,"_expoRouter"],[100,61,67,12],[100,62,67,12,"Stack"],[100,67,67,12],[101,8,68,8,"screenOptions"],[101,21,68,21],[101,23,68,23],[102,10,69,10,"headerShown"],[102,21,69,21],[102,23,69,23],[102,28,69,28],[103,10,70,10,"contentStyle"],[103,22,70,22],[103,24,70,24],[104,12,70,26,"backgroundColor"],[104,27,70,41],[104,29,70,43],[105,10,70,53],[105,11,70,54],[106,10,71,10,"animation"],[106,19,71,19],[106,21,71,21],[107,8,72,8],[107,9,72,10],[108,8,72,10,"children"],[108,16,72,10],[108,32,74,8],[108,36,74,8,"_reactJsxRuntime"],[108,52,74,8],[108,53,74,8,"jsx"],[108,56,74,8],[108,58,74,9,"_expoRouter"],[108,69,74,14],[108,70,74,14,"Stack"],[108,75,74,14],[108,76,74,15,"Screen"],[108,82,74,21],[109,10,74,22,"name"],[109,14,74,26],[109,16,74,27],[110,8,74,34],[110,9,74,36],[110,10,74,37],[110,25,75,8],[110,29,75,8,"_reactJsxRuntime"],[110,45,75,8],[110,46,75,8,"jsx"],[110,49,75,8],[110,51,75,9,"_expoRouter"],[110,62,75,14],[110,63,75,14,"Stack"],[110,68,75,14],[110,69,75,15,"Screen"],[110,75,75,21],[111,10,75,22,"name"],[111,14,75,26],[111,16,75,27],[111,28,75,39],[112,10,75,40,"options"],[112,17,75,47],[112,19,75,49],[113,12,75,51,"animation"],[113,21,75,60],[113,23,75,62],[114,10,75,69],[115,8,75,71],[115,9,75,73],[115,10,75,74],[115,25,76,8],[115,29,76,8,"_reactJsxRuntime"],[115,45,76,8],[115,46,76,8,"jsx"],[115,49,76,8],[115,51,76,9,"_expoRouter"],[115,62,76,14],[115,63,76,14,"Stack"],[115,68,76,14],[115,69,76,15,"Screen"],[115,75,76,21],[116,10,76,22,"name"],[116,14,76,26],[116,16,76,27],[116,25,76,36],[117,10,76,37,"options"],[117,17,76,44],[117,19,76,46],[118,12,76,48,"presentation"],[118,24,76,60],[118,26,76,62],[118,33,76,69],[119,12,76,71,"animation"],[119,21,76,80],[119,23,76,82],[120,10,76,102],[121,8,76,104],[121,9,76,106],[121,10,76,107],[121,25,77,8],[121,29,77,8,"_reactJsxRuntime"],[121,45,77,8],[121,46,77,8,"jsx"],[121,49,77,8],[121,51,77,9,"_expoRouter"],[121,62,77,14],[121,63,77,14,"Stack"],[121,68,77,14],[121,69,77,15,"Screen"],[121,75,77,21],[122,10,77,22,"name"],[122,14,77,26],[122,16,77,27],[122,24,77,35],[123,10,77,36,"options"],[123,17,77,43],[123,19,77,45],[124,12,77,47,"headerShown"],[124,23,77,58],[124,25,77,60],[125,10,77,66],[126,8,77,68],[126,9,77,70],[126,10,77,71],[126,25,78,8],[126,29,78,8,"_reactJsxRuntime"],[126,45,78,8],[126,46,78,8,"jsx"],[126,49,78,8],[126,51,78,9,"_expoRouter"],[126,62,78,14],[126,63,78,14,"Stack"],[126,68,78,14],[126,69,78,15,"Screen"],[126,75,78,21],[127,10,78,22,"name"],[127,14,78,26],[127,16,78,27],[127,26,78,37],[128,10,78,38,"options"],[128,17,78,45],[128,19,78,47],[129,12,78,49,"presentation"],[129,24,78,61],[129,26,78,63],[130,10,78,71],[131,8,78,73],[131,9,78,75],[131,10,78,76],[132,6,78,76],[132,7,79,13],[132,8,79,14],[133,4,79,14],[133,5,80,22],[133,6,80,23],[134,2,82,0],[135,0,82,1],[135,3]],"functionMap":{"names":["<global>","RootLayout","useEffect$argument_0","<anonymous>","setupNotifications","addNotificationListener$argument_0","addNotificationResponseListener$argument_0"],"mappings":"AAA;eCc;YCK;WCQ;KDO;GDC;6BGE;6DCU;ODE;iEEG;OFK;GHI;CDoB"},"hasCjsExports":false},"type":"js/module"}]}