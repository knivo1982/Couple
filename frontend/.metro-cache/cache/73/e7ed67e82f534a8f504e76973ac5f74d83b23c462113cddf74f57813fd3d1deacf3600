{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":72,"index":72}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../iap","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":73},"end":{"line":2,"column":136,"index":209}}],"key":"0fvNEqQvClk6ZXWivQzp6LvILhk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useIAPContext = useIAPContext;\n  exports.withIAPContext = withIAPContext;\n  var _react = require(_dependencyMap[0], \"react\");\n  var React = _interopDefault(_react);\n  var _iap = require(_dependencyMap[1], \"../iap\");\n  // @ts-ignore\n  const IAPContext = /*#__PURE__*/React.default.createContext(null);\n  function useIAPContext() {\n    const ctx = (0, _react.useContext)(IAPContext);\n    if (!ctx) {\n      throw new Error('You need wrap your app with withIAPContext HOC');\n    }\n    return ctx;\n  }\n  function withIAPContext(Component) {\n    return function WrapperComponent(props) {\n      const [connected, setConnected] = (0, _react.useState)(false);\n      const [products, setProducts] = (0, _react.useState)([]);\n      const [promotedProductsIOS, setPromotedProductsIOS] = (0, _react.useState)([]);\n      const [subscriptions, setSubscriptions] = (0, _react.useState)([]);\n      const [purchaseHistories, setPurchaseHistories] = (0, _react.useState)([]);\n      const [availablePurchases, setAvailablePurchases] = (0, _react.useState)([]);\n      const [currentPurchase, setCurrentPurchase] = (0, _react.useState)();\n      const [currentPurchaseError, setCurrentPurchaseError] = (0, _react.useState)();\n      const [initConnectionError, setInitConnectionError] = (0, _react.useState)();\n      const context = (0, _react.useMemo)(() => ({\n        connected,\n        products,\n        subscriptions,\n        promotedProductsIOS,\n        purchaseHistories,\n        availablePurchases,\n        currentPurchase,\n        currentPurchaseError,\n        initConnectionError,\n        setProducts,\n        setSubscriptions,\n        setPurchaseHistories,\n        setAvailablePurchases,\n        setCurrentPurchase,\n        setCurrentPurchaseError\n      }), [connected, products, subscriptions, promotedProductsIOS, purchaseHistories, availablePurchases, currentPurchase, currentPurchaseError, initConnectionError, setProducts, setSubscriptions, setPurchaseHistories, setAvailablePurchases, setCurrentPurchase, setCurrentPurchaseError]);\n      (0, _react.useEffect)(() => {\n        (0, _iap.initConnection)().then(value => {\n          setInitConnectionError(undefined);\n          setConnected(value);\n        }).catch(setInitConnectionError);\n      }, []);\n      (0, _react.useEffect)(() => {\n        if (!connected) {\n          return;\n        }\n        const purchaseUpdateSubscription = (0, _iap.purchaseUpdatedListener)(async purchase => {\n          setCurrentPurchaseError(undefined);\n          setCurrentPurchase(purchase);\n        });\n        const purchaseErrorSubscription = (0, _iap.purchaseErrorListener)(error => {\n          setCurrentPurchase(undefined);\n          setCurrentPurchaseError(error);\n        });\n        const promotedProductSubscription = (0, _iap.promotedProductListener)(async () => {\n          const product = await (0, _iap.getPromotedProductIOS)();\n          setPromotedProductsIOS(prevProducts => [...prevProducts, ...(product ? [product] : [])]);\n        });\n        return () => {\n          purchaseUpdateSubscription.remove();\n          purchaseErrorSubscription.remove();\n          promotedProductSubscription === null || promotedProductSubscription === void 0 ? void 0 : promotedProductSubscription.remove();\n        };\n      }, [connected]);\n      return /*#__PURE__*/React.default.createElement(IAPContext.Provider, {\n        value: context\n      }, /*#__PURE__*/React.default.createElement(Component, props));\n    };\n  }\n});","lineCount":87,"map":[[12,2,5,0,"exports"],[12,9,5,0],[12,10,5,0,"useIAPContext"],[12,23,5,0],[12,26,5,0,"useIAPContext"],[12,39,5,0],[13,2,14,0,"exports"],[13,9,14,0],[13,10,14,0,"withIAPContext"],[13,24,14,0],[13,27,14,0,"withIAPContext"],[13,41,14,0],[14,2,1,0],[14,6,1,0,"_react"],[14,12,1,0],[14,15,1,0,"require"],[14,22,1,0],[14,23,1,0,"_dependencyMap"],[14,37,1,0],[15,2,1,0],[15,6,1,0,"React"],[15,11,1,0],[15,14,1,0,"_interopDefault"],[15,29,1,0],[15,30,1,0,"_react"],[15,36,1,0],[16,2,2,0],[16,6,2,0,"_iap"],[16,10,2,0],[16,13,2,0,"require"],[16,20,2,0],[16,21,2,0,"_dependencyMap"],[16,35,2,0],[17,2,3,0],[18,2,4,0],[18,8,4,6,"IAPContext"],[18,18,4,16],[18,21,4,19],[18,34,4,32,"React"],[18,39,4,37],[18,40,4,37,"default"],[18,47,4,37],[18,48,4,38,"createContext"],[18,61,4,51],[18,62,4,52],[18,66,4,56],[18,67,4,57],[19,2,5,7],[19,11,5,16,"useIAPContext"],[19,24,5,29,"useIAPContext"],[19,25,5,29],[19,27,5,32],[20,4,6,2],[20,10,6,8,"ctx"],[20,13,6,11],[20,16,6,14],[20,20,6,14,"useContext"],[20,26,6,24],[20,27,6,24,"useContext"],[20,37,6,24],[20,39,6,25,"IAPContext"],[20,49,6,35],[20,50,6,36],[21,4,8,2],[21,8,8,6],[21,9,8,7,"ctx"],[21,12,8,10],[21,14,8,12],[22,6,9,4],[22,12,9,10],[22,16,9,14,"Error"],[22,21,9,19],[22,22,9,20],[22,70,9,68],[22,71,9,69],[23,4,10,2],[24,4,12,2],[24,11,12,9,"ctx"],[24,14,12,12],[25,2,13,0],[26,2,14,7],[26,11,14,16,"withIAPContext"],[26,25,14,30,"withIAPContext"],[26,26,14,31,"Component"],[26,35,14,40],[26,37,14,42],[27,4,15,2],[27,11,15,9],[27,20,15,18,"WrapperComponent"],[27,36,15,34,"WrapperComponent"],[27,37,15,35,"props"],[27,42,15,40],[27,44,15,42],[28,6,16,4],[28,12,16,10],[28,13,16,11,"connected"],[28,22,16,20],[28,24,16,22,"setConnected"],[28,36,16,34],[28,37,16,35],[28,40,16,38],[28,44,16,38,"useState"],[28,50,16,46],[28,51,16,46,"useState"],[28,59,16,46],[28,61,16,47],[28,66,16,52],[28,67,16,53],[29,6,17,4],[29,12,17,10],[29,13,17,11,"products"],[29,21,17,19],[29,23,17,21,"setProducts"],[29,34,17,32],[29,35,17,33],[29,38,17,36],[29,42,17,36,"useState"],[29,48,17,44],[29,49,17,44,"useState"],[29,57,17,44],[29,59,17,45],[29,61,17,47],[29,62,17,48],[30,6,18,4],[30,12,18,10],[30,13,18,11,"promotedProductsIOS"],[30,32,18,30],[30,34,18,32,"setPromotedProductsIOS"],[30,56,18,54],[30,57,18,55],[30,60,18,58],[30,64,18,58,"useState"],[30,70,18,66],[30,71,18,66,"useState"],[30,79,18,66],[30,81,18,67],[30,83,18,69],[30,84,18,70],[31,6,19,4],[31,12,19,10],[31,13,19,11,"subscriptions"],[31,26,19,24],[31,28,19,26,"setSubscriptions"],[31,44,19,42],[31,45,19,43],[31,48,19,46],[31,52,19,46,"useState"],[31,58,19,54],[31,59,19,54,"useState"],[31,67,19,54],[31,69,19,55],[31,71,19,57],[31,72,19,58],[32,6,20,4],[32,12,20,10],[32,13,20,11,"purchaseHistories"],[32,30,20,28],[32,32,20,30,"setPurchaseHistories"],[32,52,20,50],[32,53,20,51],[32,56,20,54],[32,60,20,54,"useState"],[32,66,20,62],[32,67,20,62,"useState"],[32,75,20,62],[32,77,20,63],[32,79,20,65],[32,80,20,66],[33,6,21,4],[33,12,21,10],[33,13,21,11,"availablePurchases"],[33,31,21,29],[33,33,21,31,"setAvailablePurchases"],[33,54,21,52],[33,55,21,53],[33,58,21,56],[33,62,21,56,"useState"],[33,68,21,64],[33,69,21,64,"useState"],[33,77,21,64],[33,79,21,65],[33,81,21,67],[33,82,21,68],[34,6,22,4],[34,12,22,10],[34,13,22,11,"currentPurchase"],[34,28,22,26],[34,30,22,28,"setCurrentPurchase"],[34,48,22,46],[34,49,22,47],[34,52,22,50],[34,56,22,50,"useState"],[34,62,22,58],[34,63,22,58,"useState"],[34,71,22,58],[34,73,22,59],[34,74,22,60],[35,6,23,4],[35,12,23,10],[35,13,23,11,"currentPurchaseError"],[35,33,23,31],[35,35,23,33,"setCurrentPurchaseError"],[35,58,23,56],[35,59,23,57],[35,62,23,60],[35,66,23,60,"useState"],[35,72,23,68],[35,73,23,68,"useState"],[35,81,23,68],[35,83,23,69],[35,84,23,70],[36,6,24,4],[36,12,24,10],[36,13,24,11,"initConnectionError"],[36,32,24,30],[36,34,24,32,"setInitConnectionError"],[36,56,24,54],[36,57,24,55],[36,60,24,58],[36,64,24,58,"useState"],[36,70,24,66],[36,71,24,66,"useState"],[36,79,24,66],[36,81,24,67],[36,82,24,68],[37,6,25,4],[37,12,25,10,"context"],[37,19,25,17],[37,22,25,20],[37,26,25,20,"useMemo"],[37,32,25,27],[37,33,25,27,"useMemo"],[37,40,25,27],[37,42,25,28],[37,49,25,35],[38,8,26,6,"connected"],[38,17,26,15],[39,8,27,6,"products"],[39,16,27,14],[40,8,28,6,"subscriptions"],[40,21,28,19],[41,8,29,6,"promotedProductsIOS"],[41,27,29,25],[42,8,30,6,"purchaseHistories"],[42,25,30,23],[43,8,31,6,"availablePurchases"],[43,26,31,24],[44,8,32,6,"currentPurchase"],[44,23,32,21],[45,8,33,6,"currentPurchaseError"],[45,28,33,26],[46,8,34,6,"initConnectionError"],[46,27,34,25],[47,8,35,6,"setProducts"],[47,19,35,17],[48,8,36,6,"setSubscriptions"],[48,24,36,22],[49,8,37,6,"setPurchaseHistories"],[49,28,37,26],[50,8,38,6,"setAvailablePurchases"],[50,29,38,27],[51,8,39,6,"setCurrentPurchase"],[51,26,39,24],[52,8,40,6,"setCurrentPurchaseError"],[53,6,41,4],[53,7,41,5],[53,8,41,6],[53,10,41,8],[53,11,41,9,"connected"],[53,20,41,18],[53,22,41,20,"products"],[53,30,41,28],[53,32,41,30,"subscriptions"],[53,45,41,43],[53,47,41,45,"promotedProductsIOS"],[53,66,41,64],[53,68,41,66,"purchaseHistories"],[53,85,41,83],[53,87,41,85,"availablePurchases"],[53,105,41,103],[53,107,41,105,"currentPurchase"],[53,122,41,120],[53,124,41,122,"currentPurchaseError"],[53,144,41,142],[53,146,41,144,"initConnectionError"],[53,165,41,163],[53,167,41,165,"setProducts"],[53,178,41,176],[53,180,41,178,"setSubscriptions"],[53,196,41,194],[53,198,41,196,"setPurchaseHistories"],[53,218,41,216],[53,220,41,218,"setAvailablePurchases"],[53,241,41,239],[53,243,41,241,"setCurrentPurchase"],[53,261,41,259],[53,263,41,261,"setCurrentPurchaseError"],[53,286,41,284],[53,287,41,285],[53,288,41,286],[54,6,42,4],[54,10,42,4,"useEffect"],[54,16,42,13],[54,17,42,13,"useEffect"],[54,26,42,13],[54,28,42,14],[54,34,42,20],[55,8,43,6],[55,12,43,6,"initConnection"],[55,16,43,20],[55,17,43,20,"initConnection"],[55,31,43,20],[55,33,43,21],[55,34,43,22],[55,35,43,23,"then"],[55,39,43,27],[55,40,43,28,"value"],[55,45,43,33],[55,49,43,37],[56,10,44,8,"setInitConnectionError"],[56,32,44,30],[56,33,44,31,"undefined"],[56,42,44,40],[56,43,44,41],[57,10,45,8,"setConnected"],[57,22,45,20],[57,23,45,21,"value"],[57,28,45,26],[57,29,45,27],[58,8,46,6],[58,9,46,7],[58,10,46,8],[58,11,46,9,"catch"],[58,16,46,14],[58,17,46,15,"setInitConnectionError"],[58,39,46,37],[58,40,46,38],[59,6,47,4],[59,7,47,5],[59,9,47,7],[59,11,47,9],[59,12,47,10],[60,6,48,4],[60,10,48,4,"useEffect"],[60,16,48,13],[60,17,48,13,"useEffect"],[60,26,48,13],[60,28,48,14],[60,34,48,20],[61,8,49,6],[61,12,49,10],[61,13,49,11,"connected"],[61,22,49,20],[61,24,49,22],[62,10,50,8],[63,8,51,6],[64,8,53,6],[64,14,53,12,"purchaseUpdateSubscription"],[64,40,53,38],[64,43,53,41],[64,47,53,41,"purchaseUpdatedListener"],[64,51,53,64],[64,52,53,64,"purchaseUpdatedListener"],[64,75,53,64],[64,77,53,65],[64,83,53,71,"purchase"],[64,91,53,79],[64,95,53,83],[65,10,54,8,"setCurrentPurchaseError"],[65,33,54,31],[65,34,54,32,"undefined"],[65,43,54,41],[65,44,54,42],[66,10,55,8,"setCurrentPurchase"],[66,28,55,26],[66,29,55,27,"purchase"],[66,37,55,35],[66,38,55,36],[67,8,56,6],[67,9,56,7],[67,10,56,8],[68,8,57,6],[68,14,57,12,"purchaseErrorSubscription"],[68,39,57,37],[68,42,57,40],[68,46,57,40,"purchaseErrorListener"],[68,50,57,61],[68,51,57,61,"purchaseErrorListener"],[68,72,57,61],[68,74,57,62,"error"],[68,79,57,67],[68,83,57,71],[69,10,58,8,"setCurrentPurchase"],[69,28,58,26],[69,29,58,27,"undefined"],[69,38,58,36],[69,39,58,37],[70,10,59,8,"setCurrentPurchaseError"],[70,33,59,31],[70,34,59,32,"error"],[70,39,59,37],[70,40,59,38],[71,8,60,6],[71,9,60,7],[71,10,60,8],[72,8,61,6],[72,14,61,12,"promotedProductSubscription"],[72,41,61,39],[72,44,61,42],[72,48,61,42,"promotedProductListener"],[72,52,61,65],[72,53,61,65,"promotedProductListener"],[72,76,61,65],[72,78,61,66],[72,90,61,78],[73,10,62,8],[73,16,62,14,"product"],[73,23,62,21],[73,26,62,24],[73,32,62,30],[73,36,62,30,"getPromotedProductIOS"],[73,40,62,51],[73,41,62,51,"getPromotedProductIOS"],[73,62,62,51],[73,64,62,52],[73,65,62,53],[74,10,63,8,"setPromotedProductsIOS"],[74,32,63,30],[74,33,63,31,"prevProducts"],[74,45,63,43],[74,49,63,47],[74,50,63,48],[74,53,63,51,"prevProducts"],[74,65,63,63],[74,67,63,65],[74,71,63,69,"product"],[74,78,63,76],[74,81,63,79],[74,82,63,80,"product"],[74,89,63,87],[74,90,63,88],[74,93,63,91],[74,95,63,93],[74,96,63,94],[74,97,63,95],[74,98,63,96],[75,8,64,6],[75,9,64,7],[75,10,64,8],[76,8,65,6],[76,15,65,13],[76,21,65,19],[77,10,66,8,"purchaseUpdateSubscription"],[77,36,66,34],[77,37,66,35,"remove"],[77,43,66,41],[77,44,66,42],[77,45,66,43],[78,10,67,8,"purchaseErrorSubscription"],[78,35,67,33],[78,36,67,34,"remove"],[78,42,67,40],[78,43,67,41],[78,44,67,42],[79,10,68,8,"promotedProductSubscription"],[79,37,68,35],[79,42,68,40],[79,46,68,44],[79,50,68,48,"promotedProductSubscription"],[79,77,68,75],[79,82,68,80],[79,87,68,85],[79,88,68,86],[79,91,68,89],[79,96,68,94],[79,97,68,95],[79,100,68,98,"promotedProductSubscription"],[79,127,68,125],[79,128,68,126,"remove"],[79,134,68,132],[79,135,68,133],[79,136,68,134],[80,8,69,6],[80,9,69,7],[81,6,70,4],[81,7,70,5],[81,9,70,7],[81,10,70,8,"connected"],[81,19,70,17],[81,20,70,18],[81,21,70,19],[82,6,71,4],[82,13,71,11],[82,26,71,24,"React"],[82,31,71,29],[82,32,71,29,"default"],[82,39,71,29],[82,40,71,30,"createElement"],[82,53,71,43],[82,54,71,44,"IAPContext"],[82,64,71,54],[82,65,71,55,"Provider"],[82,73,71,63],[82,75,71,65],[83,8,72,6,"value"],[83,13,72,11],[83,15,72,13,"context"],[84,6,73,4],[84,7,73,5],[84,9,73,7],[84,22,73,20,"React"],[84,27,73,25],[84,28,73,25,"default"],[84,35,73,25],[84,36,73,26,"createElement"],[84,49,73,39],[84,50,73,40,"Component"],[84,59,73,49],[84,61,73,51,"props"],[84,66,73,56],[84,67,73,57],[84,68,73,58],[85,4,74,2],[85,5,74,3],[86,2,75,0],[87,0,75,1],[87,3]],"functionMap":{"names":["<global>","useIAPContext","withIAPContext","WrapperComponent","useMemo$argument_0","useEffect$argument_0","initConnection.then$argument_0","purchaseUpdatedListener$argument_0","purchaseErrorListener$argument_0","promotedProductListener$argument_0","setPromotedProductsIOS$argument_0","<anonymous>"],"mappings":"AAA;OCI;CDQ;OEC;SCC;4BCU;MDgB;cEC;4BCC;ODG;KFC;cEC;iEEK;OFG;8DGC;OHG;kEIC;+BCE,gED;OJC;aMC;ONI;KFC;GDI;CFC"},"hasCjsExports":false},"type":"js/module"}]}